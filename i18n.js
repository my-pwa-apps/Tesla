// ============================================================
//  Tesla Dashboard – i18n
//  Translates interface labels only; internal IDs, API values,
//  proper nouns (Tesla, Supercharger, Fastned, ABRP …) are
//  intentionally left in English.
// ============================================================

const TRANSLATIONS = {

    en: {
        // Header
        connect_tesla      : 'Connect Tesla',
        // Tile headings
        tile_battery       : 'Battery',
        tile_climate       : 'Climate',
        tile_vehicle       : 'Vehicle',
        tile_controls      : 'Car Controls',
        tile_weather       : 'Weather',
        tile_navigation    : 'Navigation',
        tile_charging      : 'Nearby Charging',
        tile_trip          : 'Trip Computer',
        tile_performance   : 'Performance',
        tile_links         : 'Quick Links',
        tile_settings      : 'Settings',
        // Battery
        loading            : 'Loading…',
        charge_rate        : 'Rate',
        time_to_full       : 'Time to full',
        energy_added       : 'Energy added',
        charge_limit       : 'Charge limit',
        // Climate
        inside             : 'Inside',
        outside            : 'Outside',
        // Vehicle
        odometer           : 'Odometer',
        doors              : 'Doors',
        sentry             : 'Sentry',
        software           : 'Software',
        tire_pressure      : 'Tire Pressure',
        check_updates      : 'Check for Updates',
        install_now        : 'Install Now',
        // Drive state
        speed              : 'Speed',
        gear               : 'Gear',
        power              : 'Power',
        // Controls
        ctrl_climate       : 'Climate',
        ctrl_charge_limit  : 'Charge Limit',
        ctrl_access        : 'Access',
        ctrl_precondition  : 'Precondition',
        ctrl_set           : 'Set',
        ctrl_lock          : 'Lock',
        ctrl_unlock        : 'Unlock',
        ctrl_flash         : 'Flash',
        ctrl_honk          : 'Honk',
        // Navigation
        nav_search_tab     : 'Search',
        nav_saved_tab      : 'Saved',
        nav_recent_tab     : 'Recent',
        nav_placeholder    : 'Search destination…',
        nav_save_fav       : 'Save to Favourites',
        nav_quick          : 'Quick',
        nav_nearest_sc     : 'Nearest Supercharger',
        nav_nearest_fn     : 'Nearest Fastned',
        nav_service        : 'Service Center',
        nav_saved_empty    : 'No saved locations.\nSearch for a place and tap Save.',
        nav_recent_empty   : 'No recent searches yet.',
        nav_clear_history  : 'Clear History',
        nav_precondition   : 'Navigate + Precondition',
        charge_recommended : '⚡ Charging Recommended',
        // Charging tile
        find_chargers      : 'Find Chargers',
        refresh            : 'Refresh',
        no_chargers        : 'No Supercharger or Fastned found within 30 km',
        chargers_no_loc    : 'Enable location services to find chargers',
        chargers_error     : 'Could not load chargers',
        // Trip
        distance_today     : 'Distance Today',
        avg_efficiency     : 'Avg Efficiency',
        energy_used        : 'Energy Used',
        reset_trip         : 'Reset Trip',
        // Performance
        estimated_range    : 'Estimated Range',
        power_usage        : 'Power Usage',
        // Settings
        setting_temp       : 'Temperature',
        setting_distance   : 'Distance',
        setting_time       : 'Time Format',
        setting_language   : 'Language',
        setting_networks   : 'Charger Networks',
        refresh_data       : 'Refresh All Data',
        refreshing         : 'Refreshing…',
        temp_auto          : 'Auto (Location-based)',
        temp_celsius       : 'Celsius (°C)',
        temp_fahrenheit    : 'Fahrenheit (°F)',
        dist_miles         : 'Miles (mi)',
        dist_km            : 'Kilometres (km)',
        time_24h           : '24-hour (14:30)',
        time_12h           : '12-hour (2:30 PM)',
        // Toast / feedback
        up_to_date         : 'Software is up to date ✓',
        update_scheduled   : 'Software update scheduled!',
        cmd_failed         : 'Command failed',
        climate_on         : 'Climate on',
        climate_off        : 'Climate off',
        car_locked         : 'Car locked',
        car_unlocked       : 'Car unlocked',
        lights_flashed     : 'Lights flashed',
        honked             : 'Honked!',
        precond_started    : 'Battery preconditioning started',
        precond_failed     : 'Could not precondition',
        connect_first      : 'Connect Tesla to use car controls',
        vehicle_unreachable: 'Could not reach vehicle',
        checking           : 'Checking…',
        scheduling         : 'Scheduling…',
        already_saved      : 'Already saved',
        saved              : 'Saved!',
        you_are_here       : 'You are here',
        searching          : 'Searching…',
        no_results         : 'No results found',
        search_unavailable : 'Search unavailable',
        none_found_50km    : 'None found within 50 km',
        enable_location    : 'Enable location services',
        charge_short       : '%shortfall% km short',
        go                 : 'Go',
        save_btn           : 'Save',
        temp_set           : 'Temperature set: %val%',
        finding            : 'Finding…',
    },

    nl: {
        connect_tesla      : 'Verbind Tesla',
        tile_battery       : 'Accu',
        tile_climate       : 'Klimaat',
        tile_vehicle       : 'Voertuig',
        tile_controls      : 'Autobediening',
        tile_weather       : 'Weer',
        tile_navigation    : 'Navigatie',
        tile_charging      : 'Laden in de buurt',
        tile_trip          : 'Rijcomputer',
        tile_performance   : 'Prestaties',
        tile_links         : 'Snelkoppelingen',
        tile_settings      : 'Instellingen',
        loading            : 'Laden…',
        charge_rate        : 'Laadsnelheid',
        time_to_full       : 'Tijd tot vol',
        energy_added       : 'Energie toegevoegd',
        charge_limit       : 'Laadlimiet',
        inside             : 'Binnen',
        outside            : 'Buiten',
        odometer           : 'Kilometerstand',
        doors              : 'Deuren',
        sentry             : 'Sentry',
        software           : 'Software',
        tire_pressure      : 'Bandenspanning',
        check_updates      : 'Controleer updates',
        install_now        : 'Nu installeren',
        speed              : 'Snelheid',
        gear               : 'Versnelling',
        power              : 'Vermogen',
        ctrl_climate       : 'Klimaat',
        ctrl_charge_limit  : 'Laadlimiet',
        ctrl_access        : 'Toegang',
        ctrl_precondition  : 'Preconditioneren',
        ctrl_set           : 'Instellen',
        ctrl_lock          : 'Vergrendel',
        ctrl_unlock        : 'Ontgrendel',
        ctrl_flash         : 'Knipperlichten',
        ctrl_honk          : 'Toeter',
        nav_search_tab     : 'Zoeken',
        nav_saved_tab      : 'Opgeslagen',
        nav_recent_tab     : 'Recent',
        nav_placeholder    : 'Zoek bestemming…',
        nav_save_fav       : 'Sla op als favoriet',
        nav_quick          : 'Snel',
        nav_nearest_sc     : 'Dichtstbijzijnde Supercharger',
        nav_nearest_fn     : 'Dichtstbijzijnde Fastned',
        nav_service        : 'Servicecentrum',
        nav_saved_empty    : 'Geen opgeslagen locaties.\nZoek een plek en tik op Opslaan.',
        nav_recent_empty   : 'Nog geen recente zoekopdrachten.',
        nav_clear_history  : 'Geschiedenis wissen',
        nav_precondition   : 'Navigeer + Preconditioneer',
        charge_recommended : '⚡ Laden aanbevolen',
        find_chargers      : 'Vind laadpunten',
        refresh            : 'Vernieuwen',
        no_chargers        : 'Geen Supercharger of Fastned binnen 30 km',
        chargers_no_loc    : 'Schakel locatieservices in',
        chargers_error     : 'Laadpunten konden niet worden geladen',
        distance_today     : 'Afstand vandaag',
        avg_efficiency     : 'Gem. verbruik',
        energy_used        : 'Energie gebruikt',
        reset_trip         : 'Reset rit',
        estimated_range    : 'Geschat bereik',
        power_usage        : 'Vermogensmeter',
        setting_temp       : 'Temperatuur',
        setting_distance   : 'Afstand',
        setting_time       : 'Tijdnotatie',
        setting_language   : 'Taal',
        setting_networks   : 'Laadnetwerken',
        refresh_data       : 'Alle data vernieuwen',
        refreshing         : 'Vernieuwen…',
        temp_auto          : 'Automatisch (op basis van locatie)',
        temp_celsius       : 'Celsius (°C)',
        temp_fahrenheit    : 'Fahrenheit (°F)',
        dist_miles         : 'Mijl (mi)',
        dist_km            : 'Kilometer (km)',
        time_24h           : '24-uurs (14:30)',
        time_12h           : '12-uurs (2:30 PM)',
        up_to_date         : 'Software is up-to-date ✓',
        update_scheduled   : 'Software-update ingepland!',
        cmd_failed         : 'Opdracht mislukt',
        climate_on         : 'Klimaat aan',
        climate_off        : 'Klimaat uit',
        car_locked         : 'Auto vergrendeld',
        car_unlocked       : 'Auto ontgrendeld',
        lights_flashed     : 'Verlichting geknipperd',
        honked             : 'Getoeterd!',
        precond_started    : 'Accu-preconditionering gestart',
        precond_failed     : 'Kon niet preconditioneren',
        connect_first      : 'Verbind Tesla om autobediening te gebruiken',
        vehicle_unreachable: 'Voertuig niet bereikbaar',
        checking           : 'Controleren…',
        scheduling         : 'Inplannen…',
        already_saved      : 'Al opgeslagen',
        saved              : 'Opgeslagen!',
        you_are_here       : 'U bent hier',
        searching          : 'Zoeken…',
        no_results         : 'Geen resultaten gevonden',
        search_unavailable : 'Zoeken niet beschikbaar',
        none_found_50km    : 'Niets gevonden binnen 50 km',
        enable_location    : 'Schakel locatieservices in',
        charge_short       : '%shortfall% km tekort',
        go                 : 'Ga',
        save_btn           : 'Opslaan',
        temp_set           : 'Temperatuur ingesteld: %val%',
        finding            : 'Zoeken…',
    },

    de: {
        connect_tesla      : 'Tesla verbinden',
        tile_battery       : 'Akku',
        tile_climate       : 'Klimaanlage',
        tile_vehicle       : 'Fahrzeug',
        tile_controls      : 'Fahrzeugsteuerung',
        tile_weather       : 'Wetter',
        tile_navigation    : 'Navigation',
        tile_charging      : 'Laden in der Nähe',
        tile_trip          : 'Bordcomputer',
        tile_performance   : 'Leistung',
        tile_links         : 'Schnelllinks',
        tile_settings      : 'Einstellungen',
        loading            : 'Laden…',
        charge_rate        : 'Ladeleistung',
        time_to_full       : 'Zeit bis voll',
        energy_added       : 'Energie hinzugefügt',
        charge_limit       : 'Ladelimit',
        inside             : 'Innen',
        outside            : 'Außen',
        odometer           : 'Kilometerstand',
        doors              : 'Türen',
        sentry             : 'Sentry',
        software           : 'Software',
        tire_pressure      : 'Reifendruck',
        check_updates      : 'Auf Updates prüfen',
        install_now        : 'Jetzt installieren',
        speed              : 'Geschwindigkeit',
        gear               : 'Gang',
        power              : 'Leistung',
        ctrl_climate       : 'Klimaanlage',
        ctrl_charge_limit  : 'Ladelimit',
        ctrl_access        : 'Zugang',
        ctrl_precondition  : 'Vorkonditionieren',
        ctrl_set           : 'Setzen',
        ctrl_lock          : 'Sperren',
        ctrl_unlock        : 'Entsperren',
        ctrl_flash         : 'Blinken',
        ctrl_honk          : 'Hupen',
        nav_search_tab     : 'Suchen',
        nav_saved_tab      : 'Gespeichert',
        nav_recent_tab     : 'Verlauf',
        nav_placeholder    : 'Ziel suchen…',
        nav_save_fav       : 'Als Favorit speichern',
        nav_quick          : 'Schnell',
        nav_nearest_sc     : 'Nächster Supercharger',
        nav_nearest_fn     : 'Nächster Fastned',
        nav_service        : 'Servicecenter',
        nav_saved_empty    : 'Keine gespeicherten Orte.\nSuche einen Ort und tippe Speichern.',
        nav_recent_empty   : 'Noch keine letzten Suchen.',
        nav_clear_history  : 'Verlauf löschen',
        nav_precondition   : 'Navigieren + Vorkonditionieren',
        charge_recommended : '⚡ Laden empfohlen',
        find_chargers      : 'Ladestationen finden',
        refresh            : 'Aktualisieren',
        no_chargers        : 'Kein Supercharger oder Fastned in 30 km',
        chargers_no_loc    : 'Standortdienste aktivieren',
        chargers_error     : 'Ladestationen konnten nicht geladen werden',
        distance_today     : 'Heutige Strecke',
        avg_efficiency     : 'Ø Verbrauch',
        energy_used        : 'Verbrauchte Energie',
        reset_trip         : 'Zurücksetzen',
        estimated_range    : 'Geschätzte Reichweite',
        power_usage        : 'Leistungsanzeige',
        setting_temp       : 'Temperatur',
        setting_distance   : 'Entfernung',
        setting_time       : 'Zeitformat',
        setting_language   : 'Sprache',
        setting_networks   : 'Ladenetzwerke',
        refresh_data       : 'Alle Daten aktualisieren',
        refreshing         : 'Aktualisieren…',
        temp_auto          : 'Automatisch (standortbasiert)',
        temp_celsius       : 'Celsius (°C)',
        temp_fahrenheit    : 'Fahrenheit (°F)',
        dist_miles         : 'Meilen (mi)',
        dist_km            : 'Kilometer (km)',
        time_24h           : '24-Stunden (14:30)',
        time_12h           : '12-Stunden (2:30 PM)',
        up_to_date         : 'Software ist aktuell ✓',
        update_scheduled   : 'Software-Update eingeplant!',
        cmd_failed         : 'Befehl fehlgeschlagen',
        climate_on         : 'Klimaanlage ein',
        climate_off        : 'Klimaanlage aus',
        car_locked         : 'Auto gesperrt',
        car_unlocked       : 'Auto entsperrt',
        lights_flashed     : 'Lichter geblinkt',
        honked             : 'Gehuppt!',
        precond_started    : 'Akku-Vorkonditionierung gestartet',
        precond_failed     : 'Vorkonditionierung nicht möglich',
        connect_first      : 'Tesla verbinden um Steuerung zu nutzen',
        vehicle_unreachable: 'Fahrzeug nicht erreichbar',
        checking           : 'Prüfen…',
        scheduling         : 'Planen…',
        already_saved      : 'Bereits gespeichert',
        saved              : 'Gespeichert!',
        you_are_here       : 'Sie sind hier',
        searching          : 'Suchen…',
        no_results         : 'Keine Ergebnisse gefunden',
        search_unavailable : 'Suche nicht verfügbar',
        none_found_50km    : 'Nichts in 50 km gefunden',
        enable_location    : 'Standortdienste aktivieren',
        charge_short       : '%shortfall% km fehlen',
        go                 : 'Los',
        save_btn           : 'Speichern',
        temp_set           : 'Temperatur eingestellt: %val%',
        finding            : 'Suchen…',
    },

    fr: {
        connect_tesla      : 'Connecter Tesla',
        tile_battery       : 'Batterie',
        tile_climate       : 'Climatisation',
        tile_vehicle       : 'Véhicule',
        tile_controls      : 'Commandes',
        tile_weather       : 'Météo',
        tile_navigation    : 'Navigation',
        tile_charging      : 'Charge à proximité',
        tile_trip          : 'Ordinateur de bord',
        tile_performance   : 'Performances',
        tile_links         : 'Liens rapides',
        tile_settings      : 'Paramètres',
        loading            : 'Chargement…',
        charge_rate        : 'Puissance',
        time_to_full       : 'Temps restant',
        energy_added       : 'Énergie ajoutée',
        charge_limit       : 'Limite de charge',
        inside             : 'Intérieur',
        outside            : 'Extérieur',
        odometer           : 'Kilométrage',
        doors              : 'Portes',
        sentry             : 'Sentry',
        software           : 'Logiciel',
        tire_pressure      : 'Pression des pneus',
        check_updates      : 'Vérifier les mises à jour',
        install_now        : 'Installer maintenant',
        speed              : 'Vitesse',
        gear               : 'Rapport',
        power              : 'Puissance',
        ctrl_climate       : 'Climatisation',
        ctrl_charge_limit  : 'Limite de charge',
        ctrl_access        : 'Accès',
        ctrl_precondition  : 'Préconditionnement',
        ctrl_set           : 'Définir',
        ctrl_lock          : 'Verrouiller',
        ctrl_unlock        : 'Déverrouiller',
        ctrl_flash         : 'Clignoter',
        ctrl_honk          : 'Klaxon',
        nav_search_tab     : 'Chercher',
        nav_saved_tab      : 'Sauvegardés',
        nav_recent_tab     : 'Récents',
        nav_placeholder    : 'Rechercher une destination…',
        nav_save_fav       : 'Sauvegarder en favori',
        nav_quick          : 'Rapide',
        nav_nearest_sc     : 'Supercharger le plus proche',
        nav_nearest_fn     : 'Fastned le plus proche',
        nav_service        : 'Centre de service',
        nav_saved_empty    : 'Aucun lieu sauvegardé.\nRecherchez un endroit et appuyez sur Sauvegarder.',
        nav_recent_empty   : 'Aucune recherche récente.',
        nav_clear_history  : 'Effacer l\'historique',
        nav_precondition   : 'Naviguer + Préconditionner',
        charge_recommended : '⚡ Charge recommandée',
        find_chargers      : 'Trouver des bornes',
        refresh            : 'Actualiser',
        no_chargers        : 'Aucun Supercharger ou Fastned dans 30 km',
        chargers_no_loc    : 'Activez les services de localisation',
        chargers_error     : 'Impossible de charger les bornes',
        distance_today     : 'Distance du jour',
        avg_efficiency     : 'Consommation moyenne',
        energy_used        : 'Énergie consommée',
        reset_trip         : 'Réinitialiser',
        estimated_range    : 'Autonomie estimée',
        power_usage        : 'Utilisation de puissance',
        setting_temp       : 'Température',
        setting_distance   : 'Distance',
        setting_time       : 'Format de l\'heure',
        setting_language   : 'Langue',
        setting_networks   : 'Réseaux de recharge',
        refresh_data       : 'Actualiser toutes les données',
        refreshing         : 'Actualisation…',
        temp_auto          : 'Auto (basé sur la localisation)',
        temp_celsius       : 'Celsius (°C)',
        temp_fahrenheit    : 'Fahrenheit (°F)',
        dist_miles         : 'Miles (mi)',
        dist_km            : 'Kilomètres (km)',
        time_24h           : '24 heures (14:30)',
        time_12h           : '12 heures (2:30 PM)',
        up_to_date         : 'Le logiciel est à jour ✓',
        update_scheduled   : 'Mise à jour planifiée !',
        cmd_failed         : 'Commande échouée',
        climate_on         : 'Climatisation activée',
        climate_off        : 'Climatisation désactivée',
        car_locked         : 'Voiture verrouillée',
        car_unlocked       : 'Voiture déverrouillée',
        lights_flashed     : 'Feux clignotés',
        honked             : 'Klaxon !',
        precond_started    : 'Préconditionnement de la batterie démarré',
        precond_failed     : 'Impossible de préconditionner',
        connect_first      : 'Connectez Tesla pour utiliser les commandes',
        vehicle_unreachable: 'Impossible de joindre le véhicule',
        checking           : 'Vérification…',
        scheduling         : 'Planification…',
        already_saved      : 'Déjà sauvegardé',
        saved              : 'Sauvegardé !',
        you_are_here       : 'Vous êtes ici',
        searching          : 'Recherche…',
        no_results         : 'Aucun résultat',
        search_unavailable : 'Recherche indisponible',
        none_found_50km    : 'Aucun trouvé dans 50 km',
        enable_location    : 'Activez les services de localisation',
        charge_short       : '%shortfall% km manquants',
        go                 : 'Aller',
        save_btn           : 'Enreg.',
        temp_set           : 'Température définie : %val%',
        finding            : 'Recherche…',
    },

    es: {
        connect_tesla      : 'Conectar Tesla',
        tile_battery       : 'Batería',
        tile_climate       : 'Climatizador',
        tile_vehicle       : 'Vehículo',
        tile_controls      : 'Controles',
        tile_weather       : 'Tiempo',
        tile_navigation    : 'Navegación',
        tile_charging      : 'Carga cercana',
        tile_trip          : 'Computadora de viaje',
        tile_performance   : 'Rendimiento',
        tile_links         : 'Enlaces rápidos',
        tile_settings      : 'Ajustes',
        loading            : 'Cargando…',
        charge_rate        : 'Velocidad',
        time_to_full       : 'Tiempo hasta lleno',
        energy_added       : 'Energía añadida',
        charge_limit       : 'Límite de carga',
        inside             : 'Interior',
        outside            : 'Exterior',
        odometer           : 'Cuentakilómetros',
        doors              : 'Puertas',
        sentry             : 'Sentry',
        software           : 'Software',
        tire_pressure      : 'Presión de neumáticos',
        check_updates      : 'Buscar actualizaciones',
        install_now        : 'Instalar ahora',
        speed              : 'Velocidad',
        gear               : 'Marcha',
        power              : 'Potencia',
        ctrl_climate       : 'Climatizador',
        ctrl_charge_limit  : 'Límite de carga',
        ctrl_access        : 'Acceso',
        ctrl_precondition  : 'Precondicionar',
        ctrl_set           : 'Fijar',
        ctrl_lock          : 'Bloquear',
        ctrl_unlock        : 'Desbloquear',
        ctrl_flash         : 'Destellar',
        ctrl_honk          : 'Bocina',
        nav_search_tab     : 'Buscar',
        nav_saved_tab      : 'Guardados',
        nav_recent_tab     : 'Recientes',
        nav_placeholder    : 'Buscar destino…',
        nav_save_fav       : 'Guardar como favorito',
        nav_quick          : 'Rápido',
        nav_nearest_sc     : 'Supercharger más cercano',
        nav_nearest_fn     : 'Fastned más cercano',
        nav_service        : 'Centro de servicio',
        nav_saved_empty    : 'Sin ubicaciones guardadas.\nBusca un lugar y pulsa Guardar.',
        nav_recent_empty   : 'Sin búsquedas recientes.',
        nav_clear_history  : 'Borrar historial',
        nav_precondition   : 'Navegar + Precondicionar',
        charge_recommended : '⚡ Carga recomendada',
        find_chargers      : 'Encontrar cargadores',
        refresh            : 'Actualizar',
        no_chargers        : 'Sin Supercharger o Fastned en 30 km',
        chargers_no_loc    : 'Activa los servicios de ubicación',
        chargers_error     : 'No se pudieron cargar los cargadores',
        distance_today     : 'Distancia hoy',
        avg_efficiency     : 'Eficiencia media',
        energy_used        : 'Energía usada',
        reset_trip         : 'Reiniciar viaje',
        estimated_range    : 'Autonomía estimada',
        power_usage        : 'Uso de potencia',
        setting_temp       : 'Temperatura',
        setting_distance   : 'Distancia',
        setting_time       : 'Formato de hora',
        setting_language   : 'Idioma',
        setting_networks   : 'Redes de carga',
        refresh_data       : 'Actualizar todos los datos',
        refreshing         : 'Actualizando…',
        temp_auto          : 'Auto (basado en ubicación)',
        temp_celsius       : 'Celsius (°C)',
        temp_fahrenheit    : 'Fahrenheit (°F)',
        dist_miles         : 'Millas (mi)',
        dist_km            : 'Kilómetros (km)',
        time_24h           : '24 horas (14:30)',
        time_12h           : '12 horas (2:30 PM)',
        up_to_date         : 'El software está actualizado ✓',
        update_scheduled   : '¡Actualización de software programada!',
        cmd_failed         : 'Comando fallido',
        climate_on         : 'Climatizador activado',
        climate_off        : 'Climatizador desactivado',
        car_locked         : 'Coche bloqueado',
        car_unlocked       : 'Coche desbloqueado',
        lights_flashed     : 'Luces parpadeadas',
        honked             : '¡Bocina!',
        precond_started    : 'Precondicionamiento de batería iniciado',
        precond_failed     : 'No se pudo precondicionar',
        connect_first      : 'Conecta Tesla para usar los controles',
        vehicle_unreachable: 'No se pudo alcanzar el vehículo',
        checking           : 'Comprobando…',
        scheduling         : 'Programando…',
        already_saved      : 'Ya guardado',
        saved              : '¡Guardado!',
        you_are_here       : 'Estás aquí',
        searching          : 'Buscando…',
        no_results         : 'Sin resultados',
        search_unavailable : 'Búsqueda no disponible',
        none_found_50km    : 'Nada encontrado en 50 km',
        enable_location    : 'Activa los servicios de ubicación',
        charge_short       : '%shortfall% km de déficit',
        go                 : 'Ir',
        save_btn           : 'Guardar',
        temp_set           : 'Temperatura fijada: %val%',
        finding            : 'Buscando…',
    }
};

// Current language (set by app.js before calling applyLanguage)
let _lang = localStorage.getItem('ui_lang') || 'en';

/**
 * Translate a key to the current language.
 * Falls back to English if the key is missing in the active locale.
 */
function t(key, replacements) {
    const dict = TRANSLATIONS[_lang] || TRANSLATIONS.en;
    let str = dict[key] ?? TRANSLATIONS.en[key] ?? key;
    if (replacements) {
        Object.entries(replacements).forEach(([k, v]) => {
            str = str.replace(`%${k}%`, v);
        });
    }
    return str;
}

/**
 * Walk all [data-i18n] elements and update their text.
 * Elements with data-i18n-placeholder get their placeholder updated instead.
 * The HTML document's lang attribute is also updated.
 */
function applyLanguage(lang) {
    if (lang) _lang = lang;
    document.documentElement.lang = _lang;

    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        const val = t(key);
        if (el.tagName === 'INPUT' && el.dataset.i18nPlaceholder) {
            el.placeholder = val;
        } else if (el.tagName === 'OPTION') {
            el.textContent = val;
        } else {
            el.textContent = val;
        }
    });

    // Inputs with data-i18n-placeholder (separate from text content)
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        el.placeholder = t(el.dataset.i18nPlaceholder);
    });

    // Also refresh dynamic content that JS manages
    if (typeof updateConnectUI === 'function' && typeof AUTH !== 'undefined') {
        const state = AUTH.isLoggedIn() ? 'connected' : 'idle';
        updateConnectUI(state);
    }
    if (typeof renderSaved   === 'function') renderSaved();
    if (typeof renderRecent  === 'function') renderRecent();
}
