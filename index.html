<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tesla Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0d0d0d">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Tesla">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="icon-192.svg">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="tesla-logo">
                    <svg viewBox="0 0 342 35" xmlns="http://www.w3.org/2000/svg" aria-label="Tesla">
                        <path d="M0 .1a9.7 9.7 0 0 0 7 7h11l.5.1v27.6h6.8V7.3L26 7h11a9.8 9.8 0 0 0 7-7H0zm238.6 0h-6.8v34.8H263a9.7 9.7 0 0 0 6-6.8h-30.3V0zm-52.3 6.8c3.6-1 6.6-3.8 7.4-6.9l-38.1.1v20.6h31.1v7.2h-24.4a13.6 13.6 0 0 0-8.7 7h39.9v-21h-31.2v-7h24zm116.2 28h6.7v-14h24.6v14h6.7v-21h-38zM85.3 7h26a9.6 9.6 0 0 0 7.1-7H78.3a9.6 9.6 0 0 0 7 7zm0 13.8h26a9.6 9.6 0 0 0 7.1-7H78.3a9.6 9.6 0 0 0 7 7zm0 14.1h26a9.6 9.6 0 0 0 7.1-7H78.3a9.6 9.6 0 0 0 7 7zM308.5 7h26a9.6 9.6 0 0 0 7-7h-40a9.6 9.6 0 0 0 7 7z" fill="currentColor"/>
                    </svg>
                </div>
                <div class="header-right">
                    <button id="connectTeslaBtn" class="connect-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                            <path d="M18 8h1a4 4 0 0 1 0 8h-1"/><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/>
                            <line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/>
                        </svg>
                        Connect Tesla
                    </button>
                    <div class="time-display" id="currentTime"></div>
                </div>
            </div>
        </header>

        <div class="dashboard-grid">

            <!-- Battery Tile -->
            <div class="tile tesla-tile" id="teslaBatteryTile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="8" width="16" height="10" rx="2"/>
                            <path d="M22 11v4"/>
                            <line x1="6" y1="13" x2="12" y2="13"/>
                            <line x1="9" y1="10" x2="9" y2="16"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_battery">Battery</h2>
                </div>
                <div class="tile-content">
                    <div class="loading">Loading...</div>
                    <div class="tesla-battery-info hidden">
                        <div class="battery-display">
                            <div class="battery-level-large" id="batteryLevel">--</div>
                            <div class="battery-range" id="batteryRange">-- mi</div>
                        </div>
                        <div class="battery-bar">
                            <div class="battery-bar-fill"></div>
                        </div>
                        <div class="charging-status" id="chargingStatus">--</div>

                        <!-- Extra charging details – visible while charging -->
                        <div class="charge-details hidden" id="chargeDetails">
                            <div class="charge-detail-row">
                                <span class="charge-detail-label" data-i18n="charge_rate">Rate</span>
                                <span class="charge-detail-value" id="chargerPower">--</span>
                            </div>
                            <div class="charge-detail-row">
                                <span class="charge-detail-label" data-i18n="time_to_full">Time to full</span>
                                <span class="charge-detail-value" id="timeToFull">--</span>
                            </div>
                            <div class="charge-detail-row">
                                <span class="charge-detail-label" data-i18n="energy_added">Energy added</span>
                                <span class="charge-detail-value" id="chargeEnergyAdded">--</span>
                            </div>
                            <div class="charge-detail-row">
                                <span class="charge-detail-label" data-i18n="charge_limit">Limit</span>
                                <span class="charge-detail-value" id="chargeLimitDisplay">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Climate Tile -->
            <div class="tile tesla-tile" id="teslaClimateTile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_climate">Climate</h2>
                </div>
                <div class="tile-content">
                    <div class="loading">Loading...</div>
                    <div class="tesla-climate-info hidden">
                        <div class="temp-display">
                            <div class="temp-item">
                                <div class="temp-label" data-i18n="inside">Inside</div>
                                <div class="temp-value" id="insideTemp">--</div>
                            </div>
                            <div class="temp-item">
                                <div class="temp-label" data-i18n="outside">Outside</div>
                                <div class="temp-value" id="outsideTemp">--</div>
                            </div>
                        </div>
                        <div class="climate-status" id="climateStatus">--</div>
                        <div class="set-temp" id="setTempDisplay"></div>
                    </div>
                </div>
            </div>

            <!-- Vehicle Info Tile -->
            <div class="tile tesla-tile" id="teslaVehicleTile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M5 17H3a2 2 0 0 1-2-2V9c0-1.1.9-2 2-2h1l2-4h10l2 4h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"/>
                            <path d="M5 17h8"/>
                            <circle cx="7.5" cy="17.5" r="1.5"/>
                            <circle cx="16.5" cy="17.5" r="1.5"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_vehicle">Vehicle</h2>
                </div>
                <div class="tile-content">
                    <div class="loading">Loading...</div>
                    <div class="tesla-vehicle-info hidden">
                        <div class="vehicle-name" id="vehicleName">--</div>
                        <div class="vehicle-stats">
                            <div class="stat-item">
                                <span class="stat-label" data-i18n="odometer">Odometer</span>
                                <span class="stat-value" id="odometer">--</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label" id="lockStatusLabel" data-i18n="doors">Doors</span>
                                <span class="stat-value" id="lockStatus">--</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label" data-i18n="sentry">Sentry</span>
                                <span class="stat-value" id="sentryStatus">--</span>
                            </div>                            <div class="stat-item">
                                <span class="stat-label" data-i18n="software">Software</span>
                                <span class="stat-value" id="firmwareVersion">--</span>
                            </div>
                        </div>

                        <!-- Firmware update bar -->
                        <div class="fw-update-bar hidden" id="fwUpdateBar">
                            <div class="fw-update-info" id="fwUpdateInfo"></div>
                            <button class="ctrl-btn small" id="fwInstallBtn" data-i18n="install_now">Install Now</button>
                        </div>
                        <button class="action-btn small fw-check-btn" id="checkFwBtn" data-i18n="check_updates">Check for Updates</button>

                        <!-- Tire pressures -->
                        <div class="tires-section" id="tiresSection">
                            <div class="tires-label"><span data-i18n="tire_pressure">Tire Pressure</span> <span class="tires-unit">(bar)</span></div>
                            <div class="tires-grid">
                                <div class="tire-cell">
                                    <span class="tire-pos">FL</span>
                                    <span class="tire-val" id="tpmsFL">--</span>
                                </div>
                                <div class="tire-cell">
                                    <span class="tire-pos">FR</span>
                                    <span class="tire-val" id="tpmsFR">--</span>
                                </div>
                                <div class="tire-cell">
                                    <span class="tire-pos">RL</span>
                                    <span class="tire-val" id="tpmsRL">--</span>
                                </div>
                                <div class="tire-cell">
                                    <span class="tire-pos">RR</span>
                                    <span class="tire-val" id="tpmsRR">--</span>
                                </div>
                            </div>
                        </div>

                        <!-- Drive state – shown while driving -->
                        <div class="drive-state hidden" id="driveStateSection">
                            <div class="drive-row">
                                <div class="drive-stat">
                                    <span class="drive-stat-label" data-i18n="speed">Speed</span>
                                    <span class="drive-stat-value" id="driveSpeed">0</span>
                                </div>
                                <div class="drive-stat">
                                    <span class="drive-stat-label" data-i18n="gear">Gear</span>
                                    <span class="drive-stat-value" id="driveGear">P</span>
                                </div>
                                <div class="drive-stat">
                                    <span class="drive-stat-label" data-i18n="power">Power</span>
                                    <span class="drive-stat-value" id="drivePower">--</span>
                                </div>
                            </div>                        </div>
                    </div>
                </div>
            </div>

            <!-- Car Controls Tile -->
            <div class="tile tesla-tile controls-tile" id="controlsTile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="4" y1="6" x2="20" y2="6"/>
                            <line x1="4" y1="12" x2="20" y2="12"/>
                            <line x1="4" y1="18" x2="20" y2="18"/>
                            <circle cx="9" cy="6" r="2" fill="currentColor" stroke="none"/>
                            <circle cx="15" cy="12" r="2" fill="currentColor" stroke="none"/>
                            <circle cx="10" cy="18" r="2" fill="currentColor" stroke="none"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_controls">Car Controls</h2>
                </div>
                <div class="tile-content">
                    <div class="ctrl-section">
                        <div class="ctrl-section-label" data-i18n="ctrl_climate">Climate</div>
                        <div class="ctrl-row">
                            <button class="ctrl-btn" id="ctrlClimateToggle">Climate: ---</button>
                            <button class="ctrl-btn" id="ctrlPrecondition" data-i18n="ctrl_precondition">Precondition</button>
                        </div>
                        <div class="ctrl-row ctrl-temp-row">
                            <button class="ctrl-icon-btn" id="ctrlTempDown">&#8722;</button>
                            <span class="ctrl-temp-val" id="ctrlTempDisplay">---</span>
                            <button class="ctrl-icon-btn" id="ctrlTempUp">+</button>
                        </div>
                    </div>
                    <div class="ctrl-section">
                        <div class="ctrl-section-label" data-i18n="ctrl_charge_limit">Charge Limit</div>
                        <div class="ctrl-charge-row">
                            <input type="range" id="ctrlChargeSlider" min="50" max="100" step="5" value="80">
                            <span id="ctrlChargeVal">80%</span>
                            <button class="ctrl-btn small" id="ctrlChargeSet" data-i18n="ctrl_set">Set</button>
                        </div>
                    </div>
                    <div class="ctrl-section">
                        <div class="ctrl-section-label" data-i18n="ctrl_access">Access</div>
                        <div class="ctrl-row">
                            <button class="ctrl-btn" id="ctrlLock" data-i18n="ctrl_lock">Lock</button>
                            <button class="ctrl-btn" id="ctrlUnlock" data-i18n="ctrl_unlock">Unlock</button>
                            <button class="ctrl-btn" id="ctrlFlash" data-i18n="ctrl_flash">Flash</button>
                            <button class="ctrl-btn" id="ctrlHonk" data-i18n="ctrl_honk">Honk</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Weather Tile -->
            <div class="tile weather-tile" id="weatherTile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"/>
                            <line x1="12" y1="1" x2="12" y2="3"/>
                            <line x1="12" y1="21" x2="12" y2="23"/>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                            <line x1="1" y1="12" x2="3" y2="12"/>
                            <line x1="21" y1="12" x2="23" y2="12"/>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_weather">Weather</h2>
                </div>
                <div class="tile-content">
                    <div class="loading">Loading...</div>
                    <div class="weather-info hidden">
                        <div class="temp" id="temperature"></div>
                        <div class="condition" id="condition"></div>
                        <div class="location" id="location"></div>
                    </div>
                </div>
            </div>

            <!-- Navigation Tile – full width row -->
            <div class="tile navigation-tile nav-full-tile" id="navigationTile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_navigation">Navigation</h2>
                    <!-- App Launchers -->
                    <div class="nav-app-launchers">
                        <button class="nav-app-pill" data-app="google">Google Maps</button>
                        <button class="nav-app-pill" data-app="waze">Waze</button>
                        <button class="nav-app-pill" data-app="here">HERE WeGo</button>
                        <button class="nav-app-pill" data-app="abrp">ABRP</button>
                    </div>
                </div>

                <div class="tile-content nav-layout">
                    <!-- Left Panel -->
                    <div class="nav-panel">
                        <div class="nav-tabs">
                            <button class="nav-tab active" data-tab="search" data-i18n="nav_search_tab">Search</button>
                            <button class="nav-tab" data-tab="saved" data-i18n="nav_saved_tab">Saved</button>
                            <button class="nav-tab" data-tab="recent" data-i18n="nav_recent_tab">Recent</button>
                        </div>

                        <!-- Search Pane -->
                        <div class="nav-pane" id="navPaneSearch">
                            <div class="nav-search-bar">
                                <input type="text" id="navSearch" placeholder="Search destination…" data-i18n-placeholder="nav_placeholder" class="nav-input" autocomplete="off" spellcheck="false">
                            </div>
                            <div class="nav-results" id="navResults"></div>

                            <!-- Destination info card (shown after selecting a result) -->
                            <div class="dest-info hidden" id="destInfo">
                                <div class="dest-info-name" id="destInfoName"></div>
                                <div class="dest-info-address" id="destInfoAddress"></div>
                                <div class="dest-info-stats">
                                    <span class="dest-stat">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">
                                            <circle cx="12" cy="12" r="10"/>
                                            <polyline points="12 6 12 12 16 14"/>
                                        </svg>
                                        <span id="destDuration">--</span>
                                    </span>
                                    <span class="dest-stat">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">
                                            <line x1="3" y1="12" x2="21" y2="12"/>
                                            <polyline points="8 7 3 12 8 17"/>
                                            <polyline points="16 7 21 12 16 17"/>
                                        </svg>
                                        <span id="destDistance">--</span>
                                    </span>
                                </div>
                                <button class="action-btn small" id="saveToFavBtn" data-i18n="nav_save_fav">Save to Favourites</button>
                                <div class="charge-rec hidden" id="chargeRec">
                                    <div class="charge-rec-header" data-i18n="charge_recommended">&#9889; Charging Recommended</div>
                                    <div class="charge-rec-body" id="chargeRecBody"></div>
                                </div>
                            </div>

                            <div class="nav-quick">
                                <p class="nav-section-label" data-i18n="nav_quick">Quick</p>
                                <div class="nav-quick-grid">
                                    <button class="dest-btn" data-dest="supercharger" data-i18n="nav_nearest_sc">Nearest Supercharger</button>
                                    <button class="dest-btn" data-dest="fastned" data-i18n="nav_nearest_fn">Nearest Fastned</button>
                                    <button class="dest-btn" data-dest="service" data-i18n="nav_service">Service Center</button>
                                </div>
                            </div>
                        </div>

                        <!-- Saved Pane -->
                        <div class="nav-pane hidden" id="navPaneSaved">
                            <div id="savedList"></div>
                            <p class="nav-empty hidden" id="savedEmpty" data-i18n="nav_saved_empty">No saved locations.</p>
                        </div>

                        <!-- Recent Pane -->
                        <div class="nav-pane hidden" id="navPaneRecent">
                            <div id="recentList"></div>
                            <p class="nav-empty hidden" id="recentEmpty" data-i18n="nav_recent_empty">No recent searches yet.</p>
                            <button class="action-btn small" id="clearRecentBtn" style="margin-top:12px" data-i18n="nav_clear_history">Clear History</button>
                        </div>
                    </div><!-- /nav-panel -->

                    <!-- Map Panel -->
                    <div class="nav-map-panel">
                        <div id="navMap"></div>
                        <button class="map-locate-btn" id="mapLocateBtn" title="Go to my location">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M12 1v4M12 19v4M1 12h4M19 12h4"/>
                            </svg>
                        </button>
                    </div>
                </div><!-- /nav-layout -->
            </div><!-- /navigation-tile -->

            <!-- Nearby Charging Tile -->
            <div class="tile charging-tile" id="chargingTile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_charging">Nearby Charging</h2>
                </div>
                <div class="tile-content">
                    <button class="action-btn" id="findChargersBtn" data-i18n="find_chargers">Find Chargers</button>
                    <div class="charging-info hidden" id="chargingInfo"></div>
                </div>
            </div>

            <!-- Trip Computer Tile -->
            <div class="tile trip-tile" id="tripTile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="6" cy="19" r="3"/>
                            <path d="M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15"/>
                            <circle cx="18" cy="5" r="3"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_trip">Trip Computer</h2>
                </div>
                <div class="tile-content">
                    <div class="trip-stats">
                        <div class="trip-stat">
                            <span class="trip-label" data-i18n="distance_today">Distance Today</span>
                            <span class="trip-value" id="distanceToday">0 km</span>
                        </div>
                        <div class="trip-stat">
                            <span class="trip-label" data-i18n="avg_efficiency">Avg Efficiency</span>
                            <span class="trip-value" id="avgEfficiency">245 Wh/km</span>
                        </div>
                        <div class="trip-stat">
                            <span class="trip-label" data-i18n="energy_used">Energy Used</span>
                            <span class="trip-value" id="energyUsed">0 kWh</span>
                        </div>
                        <button class="action-btn small" id="resetTripBtn" data-i18n="reset_trip">Reset Trip</button>
                    </div>
                </div>
            </div>

            <!-- Performance Tile -->
            <div class="tile speed-tile" id="speedTile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2a10 10 0 0 1 7.38 3.22"/>
                            <path d="M4.62 5.22A10 10 0 0 0 2 12"/>
                            <path d="M12 22a10 10 0 0 1-7.38-3.22"/>
                            <path d="M19.38 18.78A10 10 0 0 0 22 12"/>
                            <line x1="12" y1="12" x2="15.5" y2="7"/>
                            <circle cx="12" cy="12" r="1.5"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_performance">Performance</h2>
                </div>
                <div class="tile-content">
                    <div class="performance-stats">
                        <div class="perf-main">
                            <div class="speed-display" id="speedDisplay">0</div>
                                <div class="speed-unit" id="speedUnit">km/h</div>
                        </div>
                        <div class="range-estimate">
                            <div class="range-label" data-i18n="estimated_range">Estimated Range</div>
                            <div class="range-value" id="rangeEstimate">245 mi</div>
                        </div>
                        <div class="power-meter">
                            <div class="power-label" data-i18n="power_usage">Power Usage</div>
                            <div class="power-bar">
                                <div class="power-bar-fill" id="powerBarFill"></div>
                            </div>
                            <div class="power-value" id="powerValue">0 kW</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Links Tile -->
            <div class="tile links-tile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_links">Quick Links</h2>
                </div>
                <div class="tile-content">
                    <div class="quick-links">
                        <a href="https://www.tesla.com/charging" target="_blank" rel="noopener" class="link-btn">Tesla Superchargers</a>
                        <a href="https://www.plugshare.com" target="_blank" rel="noopener" class="link-btn">PlugShare</a>
                        <a href="https://abetterrouteplanner.com" target="_blank" rel="noopener" class="link-btn">Route Planner (ABRP)</a>
                        <a href="https://www.tesla.com/support" target="_blank" rel="noopener" class="link-btn">Tesla Support</a>
                    </div>
                </div>
            </div>

            <!-- Settings Tile -->
            <div class="tile settings-tile" id="settingsTile">
                <div class="tile-header">
                    <span class="tile-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                    </span>
                    <h2 data-i18n="tile_settings">Settings</h2>
                </div>
                <div class="tile-content">
                    <div class="settings-list">
                        <div class="setting-item">
                            <label for="tempUnit" data-i18n="setting_temp">Temperature</label>
                            <select id="tempUnit" class="setting-select">
                                <option value="auto" data-i18n="temp_auto">Auto (Location-based)</option>
                                <option value="celsius" data-i18n="temp_celsius">Celsius (°C)</option>
                                <option value="fahrenheit" data-i18n="temp_fahrenheit">Fahrenheit (°F)</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="distanceUnit" data-i18n="setting_distance">Distance</label>
                            <select id="distanceUnit" class="setting-select">
                                <option value="miles" data-i18n="dist_miles">Miles (mi)</option>
                                <option value="km" data-i18n="dist_km">Kilometres (km)</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="timeFormat" data-i18n="setting_time">Time Format</label>
                            <select id="timeFormat" class="setting-select">
                                <option value="24h" data-i18n="time_24h">24-hour (14:30)</option>
                                <option value="12h" data-i18n="time_12h">12-hour (2:30 PM)</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="uiLanguage" data-i18n="setting_language">Language</label>
                            <select id="uiLanguage" class="setting-select">
                                <option value="en">English</option>
                                <option value="nl">Nederlands</option>
                                <option value="de">Deutsch</option>
                                <option value="fr">Français</option>
                                <option value="es">Español</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label data-i18n="setting_networks">Charger Networks</label>
                            <div class="pref-toggle-group" id="chargerPrefGroup">
                                <button class="pref-toggle active" data-net="supercharger">Supercharger</button>
                                <button class="pref-toggle active" data-net="fastned">Fastned</button>
                                <button class="pref-toggle active" data-net="other">Other</button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <button class="action-btn small" id="refreshAllBtn" data-i18n="refresh_data">Refresh All Data</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="i18n.js"></script>
    <script src="app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () =>
                navigator.serviceWorker.register('/sw.js').catch(() => {})
            );
        }
    </script>
</body>
</html>